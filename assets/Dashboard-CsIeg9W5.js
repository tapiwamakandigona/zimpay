import{r as a,a as ae,s as p,j as e,u as re,b as ie}from"./index-FgqYyuXd.js";import{n as le}from"./phoneUtils-CAu1KXEa.js";function ce(d,r=300){const c=a.useRef(null),h=a.useRef(d);return a.useEffect(()=>{h.current=d},[d]),a.useEffect(()=>()=>{c.current&&clearTimeout(c.current)},[]),a.useCallback((...P)=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{h.current(...P)},r)},[r])}function X(d){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(d)}function oe({onClose:d,onSuccess:r}){const{user:c,profile:h}=ae(),[P,J]=a.useState(""),[N,V]=a.useState(""),[b,R]=a.useState(""),[F,C]=a.useState("form"),[B,g]=a.useState(!1),[w,f]=a.useState(!1),[v,n]=a.useState(""),[l,y]=a.useState(null),[q,$]=a.useState(!1),M=a.useCallback(async t=>{const T=t.trim();if(!T||T.length<2){y(null),f(!1);return}f(!0),n(""),y(null),$(!1);const o=T.replace(/^@+/,"").trim();if(o.toLowerCase().startsWith("zm-")){try{const{data:i,error:j}=await p.from("zimbet_accounts").select("id, user_id, username, balance").eq("username",o.toLowerCase()).single();if(j||!i){n(`ZimBet account "@${o}" not found.`),f(!1);return}y({id:i.user_id,email:"",full_name:"ZimBet Account",username:i.username,phone_number:"",balance:i.balance,created_at:"",updated_at:""}),$(!0),n("")}catch{n("Error looking up ZimBet account.")}f(!1);return}const k=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),_=/^[\d\s+\-()]+$/.test(o)&&o.replace(/\D/g,"").length>=9;if(!k&&!_){const i=o.toLowerCase().replace(/[^a-z0-9_]/g,"");if(i.length<2){n("Username must be at least 2 characters"),f(!1);return}if(i!==o.toLowerCase()){n(`Invalid characters. Did you mean "@${i}"?`),f(!1);return}}const W=1e4,L=new Promise((i,j)=>{setTimeout(()=>j(new Error("TIMEOUT")),W)});try{let i=null,j="";if(k){j="email";const x=await Promise.race([p.from("profiles").select("*").eq("email",o.toLowerCase()).maybeSingle(),L]);if(i=x.data,x.error)throw new Error("DB_ERROR")}else if(_){j="phone";const x=le(o),E=await Promise.race([p.from("profiles").select("*").in("phone_number",x).limit(1).maybeSingle(),L]);if(i=E.data,E.error)throw new Error("DB_ERROR")}else{j="username";const x=o.toLowerCase(),E=await Promise.race([p.from("profiles").select("*").eq("username",x).maybeSingle(),L]);if(i=E.data,E.error)throw new Error("DB_ERROR");if(!i){const Z=await Promise.race([p.from("profiles").select("username").ilike("username",`%${x}%`).limit(3),L]);if(Z.data&&Z.data.length>0){const G=Z.data.map(K=>`@${K.username}`).join(", ");n(`User "@${x}" not found. Did you mean: ${G}?`),f(!1);return}}}i?i.id===c?.id?(n("You cannot send money to yourself"),y(null)):(y(i),n("")):(n(j==="email"?"No account found with this email.":j==="phone"?"No account found with this phone number.":`User "@${o}" not found.`),y(null))}catch(i){i instanceof Error&&(i.message==="TIMEOUT"?n("Search timed out. Check your connection."):n("Something went wrong. Please try again.")),y(null)}f(!1)},[c?.id]),z=ce(M,400),O=t=>{J(t),y(null),n(""),t.trim().length>=2&&z(t)},Y=()=>{P.trim().length>=2?M(P):n("Please enter at least 2 characters")},H=()=>{const t=parseFloat(N);if(!l){n("Please find a valid recipient first");return}if(isNaN(t)||t<=0){n("Please enter a valid amount");return}if(t>(h?.balance||0)){n("Insufficient balance");return}if(t<1){n("Minimum transfer amount is $1");return}if(N.includes(".")&&N.split(".")[1]?.length>2){n("Amount can have at most 2 decimal places");return}n(""),C("confirm")},U=async()=>{if(!c||!l||!h)return;g(!0),n("");const t=Math.round(parseFloat(N)*100)/100;if(q)try{const{error:k}=await p.from("profiles").update({balance:Math.round((h.balance-t)*100)/100}).eq("id",c.id);if(k){n("Failed to process transfer. Try again."),g(!1);return}const{error:_}=await p.from("zimbet_accounts").update({balance:Math.round((l.balance+t)*100)/100}).eq("username",l.username);if(_){await p.from("profiles").update({balance:h.balance}).eq("id",c.id),n("Transfer failed. Balance restored."),g(!1);return}await p.from("transactions").insert({sender_id:c.id,receiver_id:l.id,amount:t,description:b||`Transfer to ZimBet @${l.username}`,status:"completed"}),C("success"),g(!1);return}catch{n("Something went wrong. Try again."),g(!1);return}const{data:T,error:o}=await p.rpc("transfer_money",{p_sender_id:c.id,p_receiver_identifier:l.username,p_amount:t,p_description:b||null});if(o){n(o.message),g(!1);return}const A=T;if(!A.success){n(A.error||"Transfer failed"),g(!1);return}C("success"),g(!1)},m=t=>{t&&(t.preventDefault(),t.stopPropagation()),d()};return e.jsx("div",{className:"modal-overlay",onClick:m,children:e.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{className:"modal-close",onClick:m,type:"button","aria-label":"Close modal",children:"âœ•"}),F==="form"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{className:"modal-icon",children:"ðŸ’¸"}),e.jsx("h2",{children:"Send Money"}),e.jsx("p",{children:"Transfer funds instantly to any ZimPay user"})]}),e.jsxs("div",{className:"modal-body",children:[v&&e.jsx("div",{className:"error-message",children:v}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Recipient Username, Email, or Phone"}),e.jsxs("div",{className:"input-with-button",children:[e.jsx("input",{type:"text",value:P,onChange:t=>O(t.target.value),placeholder:"@username, email, or 0773..."}),e.jsx("button",{type:"button",className:"btn btn-search",onClick:Y,disabled:w,children:w?"...":"ðŸ”"})]}),w&&e.jsx("p",{className:"search-hint",children:"Searching..."})]}),l&&e.jsxs("div",{className:"recipient-card",children:[e.jsx("div",{className:"recipient-avatar",children:l.full_name.charAt(0)}),e.jsxs("div",{className:"recipient-info",children:[e.jsx("p",{className:"recipient-name",children:l.full_name}),e.jsxs("p",{className:"recipient-username",children:["@",l.username]})]}),e.jsx("span",{className:"recipient-check",children:"âœ“"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Amount (USD)"}),e.jsxs("div",{className:"amount-input",children:[e.jsx("span",{className:"currency-symbol",children:"$"}),e.jsx("input",{type:"number",value:N,onChange:t=>V(t.target.value),placeholder:"0.00",min:"1",max:h?.balance,step:"0.01"})]}),e.jsxs("p",{className:"balance-hint",children:["Available: ",X(h?.balance||0)]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Note (optional)"}),e.jsx("input",{type:"text",value:b,onChange:t=>R(t.target.value),placeholder:"What's this for?",maxLength:100})]}),e.jsx("button",{className:"btn btn-primary btn-block",onClick:H,disabled:!l||!N||w,children:"Continue"})]})]}),F==="confirm"&&l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("span",{className:"modal-icon",children:"ðŸ”’"}),e.jsx("h2",{children:"Confirm Transfer"}),e.jsx("p",{children:"Review the details before sending"})]}),e.jsxs("div",{className:"modal-body",children:[v&&e.jsx("div",{className:"error-message",children:v}),e.jsxs("div",{className:"confirm-details",children:[e.jsxs("div",{className:"confirm-row",children:[e.jsx("span",{children:"To"}),e.jsx("span",{className:"confirm-value",children:l.full_name})]}),e.jsxs("div",{className:"confirm-row",children:[e.jsx("span",{children:"Username"}),e.jsxs("span",{className:"confirm-value",children:["@",l.username]})]}),e.jsxs("div",{className:"confirm-row-amount",children:[e.jsx("span",{children:"Amount"}),e.jsx("span",{className:"confirm-amount",children:X(parseFloat(N))})]}),b&&e.jsxs("div",{className:"confirm-row",children:[e.jsx("span",{children:"Note"}),e.jsx("span",{className:"confirm-value",children:b})]})]}),e.jsxs("div",{className:"confirm-buttons",children:[e.jsx("button",{className:"btn btn-outline btn-block",onClick:()=>C("form"),disabled:B,children:"Back"}),e.jsx("button",{className:"btn btn-primary btn-block",onClick:U,disabled:B,children:B?"Sending...":"Confirm & Send"})]})]})]}),F==="success"&&l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"modal-header success-header",children:[e.jsx("span",{className:"success-icon",children:"âœ…"}),e.jsx("h2",{children:"Transfer Successful!"}),e.jsx("p",{children:"Your money is on its way"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"success-details",children:[e.jsx("p",{className:"success-amount",children:X(parseFloat(N))}),e.jsxs("p",{className:"success-to",children:["sent to ",e.jsx("strong",{children:l.full_name})]})]}),e.jsx("button",{className:"btn btn-primary btn-block",onClick:r,children:"Done"})]})]})]})})}function ue(){const{user:d,profile:r,signOut:c,refreshProfile:h,updateProfile:P,resetPassword:J}=ae(),{theme:N,toggleTheme:V}=re(),b=ie(),[R,F]=a.useState([]),[C,B]=a.useState(!0),[g,w]=a.useState(!1),[f,v]=a.useState("home"),[n,l]=a.useState(!1),[y,q]=a.useState(!1),[$,M]=a.useState(!1),[z,O]=a.useState(""),[Y,H]=a.useState(""),[U,m]=a.useState({type:"",text:""}),[t,T]=a.useState(!1),[o,A]=a.useState(!1),[k,_]=a.useState(!1),[I,W]=a.useState("");a.useEffect(()=>{if(!r&&d){const s=setTimeout(()=>{l(!0)},1e4);return()=>clearTimeout(s)}else l(!1)},[r,d]);const L=async()=>{q(!0),l(!1),await h(),q(!1)};a.useEffect(()=>{if(!d){b("/login");return}i();let s=null;try{s=p.channel("transactions").on("postgres_changes",{event:"INSERT",schema:"public",table:"transactions"},()=>{i(),h()}).subscribe()}catch{}return()=>{if(s)try{s.unsubscribe()}catch{}}},[d,b]);const i=async()=>{if(d)try{const{data:s,error:D}=await p.from("transactions").select(`
            *,
            sender:profiles!transactions_sender_id_fkey(id, full_name, username),
            receiver:profiles!transactions_receiver_id_fkey(id, full_name, username)
          `).or(`sender_id.eq.${d.id},receiver_id.eq.${d.id}`).order("created_at",{ascending:!1}).limit(20);F(D?[]:s||[])}catch{F([])}finally{B(!1)}},j=async()=>{await c(),b("/login")},x=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(s),E=s=>{const D=new Date(s),S=new Date().getTime()-D.getTime(),Q=Math.floor(S/6e4),ee=Math.floor(S/36e5),se=Math.floor(S/864e5);return Q<1?"Just now":Q<60?`${Q}m ago`:ee<24?`${ee}h ago`:se<7?`${se}d ago`:D.toLocaleDateString("en-US",{month:"short",day:"numeric"})},Z=s=>s.sender_id===d?.id?"sent":"received",G=()=>{r&&(O(r.full_name),H(r.phone_number),M(!0),m({type:"",text:""}))},K=async()=>{m({type:"",text:""});const{error:s}=await P({full_name:z,phone_number:Y});s?m({type:"error",text:s.message||"Failed to update profile"}):(m({type:"success",text:"Profile updated successfully"}),M(!1))},ne=async()=>{if(r?.email){T(!0);const{error:s}=await J(r.email);m(s?{type:"error",text:s.message||"Failed to send reset email"}:{type:"success",text:"Password reset email sent to "+r.email}),T(!1)}},te=async()=>{if(I!=="DELETE"){m({type:"error",text:"Please type DELETE to confirm"});return}_(!0),m({type:"",text:""});try{const{error:s}=await p.rpc("delete_user_account");if(s){m({type:"error",text:s.message||"Failed to delete account"}),_(!1);return}await c(),b("/login")}catch{m({type:"error",text:"An unexpected error occurred"}),_(!1)}};return a.useEffect(()=>{const s=setTimeout(()=>{C&&B(!1)},1e4);return()=>clearTimeout(s)},[C]),C?e.jsxs("div",{className:"dashboard",children:[e.jsx("header",{className:"dashboard-header",children:e.jsx("div",{className:"header-left",children:e.jsxs("div",{className:"logo-mini",children:[e.jsx("span",{children:"ðŸ’³"}),e.jsx("span",{className:"logo-text",children:"ZimPay"})]})})}),e.jsxs("main",{className:"dashboard-main",children:[e.jsx("div",{className:"skeleton skeleton-balance"}),e.jsxs("div",{className:"quick-actions",children:[e.jsx("div",{className:"skeleton skeleton-action"}),e.jsx("div",{className:"skeleton skeleton-action"}),e.jsx("div",{className:"skeleton skeleton-action"}),e.jsx("div",{className:"skeleton skeleton-action"})]}),e.jsxs("div",{className:"transactions-section",children:[e.jsx("div",{className:"section-header",children:e.jsx("div",{className:"skeleton skeleton-text medium"})}),e.jsxs("div",{className:"transactions-list",children:[e.jsxs("div",{className:"skeleton-row",children:[e.jsx("div",{className:"skeleton skeleton-avatar"}),e.jsxs("div",{className:"skeleton-content",children:[e.jsx("div",{className:"skeleton skeleton-text short"}),e.jsx("div",{className:"skeleton skeleton-text medium"})]}),e.jsx("div",{className:"skeleton skeleton-amount"})]}),e.jsxs("div",{className:"skeleton-row",children:[e.jsx("div",{className:"skeleton skeleton-avatar"}),e.jsxs("div",{className:"skeleton-content",children:[e.jsx("div",{className:"skeleton skeleton-text short"}),e.jsx("div",{className:"skeleton skeleton-text medium"})]}),e.jsx("div",{className:"skeleton skeleton-amount"})]}),e.jsxs("div",{className:"skeleton-row",children:[e.jsx("div",{className:"skeleton skeleton-avatar"}),e.jsxs("div",{className:"skeleton-content",children:[e.jsx("div",{className:"skeleton skeleton-text short"}),e.jsx("div",{className:"skeleton skeleton-text medium"})]}),e.jsx("div",{className:"skeleton skeleton-amount"})]})]})]})]})]}):r?e.jsxs("div",{className:"dashboard",children:[e.jsxs("header",{className:"dashboard-header",children:[e.jsx("div",{className:"header-left",children:e.jsxs("div",{className:"logo-mini",children:[e.jsx("span",{children:"ðŸ’³"}),e.jsx("span",{className:"logo-text",children:"ZimPay"})]})}),e.jsxs("div",{className:"header-right",children:[e.jsx("button",{className:"btn-icon theme-btn",onClick:V,"aria-label":"Toggle theme",children:N==="dark"?"â˜€ï¸":"ðŸŒ™"}),e.jsx("button",{className:"btn-icon signout-btn",onClick:j,"aria-label":"Sign out",children:"ðŸšª"})]})]}),e.jsxs("main",{className:"dashboard-main",children:[f==="home"&&e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"balance-section animate-fadeInUp",children:e.jsxs("div",{className:"balance-card glass-card",children:[e.jsxs("div",{className:"balance-header",children:[e.jsx("span",{className:"balance-label",children:"Available Balance"}),e.jsx("span",{className:"balance-badge",children:"USD"})]}),e.jsx("h1",{className:"balance-amount",children:x(r.balance)}),e.jsxs("div",{className:"balance-footer",children:[e.jsxs("div",{className:"balance-user",children:[e.jsx("span",{className:"user-avatar",children:r.full_name.charAt(0)}),e.jsxs("span",{className:"user-name",children:["@",r.username]})]}),e.jsx("div",{className:"card-chip",children:"ðŸ’³"})]}),e.jsx("div",{className:"card-decoration"})]})}),e.jsxs("section",{className:"quick-actions animate-fadeInUp stagger-1",children:[e.jsxs("button",{className:"action-btn primary",onClick:()=>w(!0),children:[e.jsx("span",{className:"action-icon",children:"ðŸ’¸"}),e.jsx("span",{children:"Send Money"})]}),e.jsxs("button",{className:"action-btn secondary",onClick:()=>v("history"),children:[e.jsx("span",{className:"action-icon",children:"ðŸ“Š"}),e.jsx("span",{children:"History"})]}),e.jsxs("button",{className:"action-btn secondary",onClick:()=>v("profile"),children:[e.jsx("span",{className:"action-icon",children:"ðŸ‘¤"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("a",{href:"https://tapiwamakandigona.github.io/zimbet/",target:"_blank",rel:"noopener noreferrer",className:"action-btn zimbet",children:[e.jsx("span",{className:"action-icon",children:"ðŸŽ°"}),e.jsx("span",{children:"ZimBet"})]})]}),e.jsxs("section",{className:"transactions-section animate-fadeInUp stagger-2",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Recent Activity"}),R.length>0&&e.jsx("button",{className:"btn-ghost",onClick:()=>v("history"),children:"View all"})]}),R.length===0?e.jsxs("div",{className:"empty-state card",children:[e.jsx("span",{className:"empty-icon",children:"ðŸ“­"}),e.jsx("h3",{children:"No transactions yet"}),e.jsx("p",{children:"Send money to someone to get started!"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>w(!0),children:"Send Your First Payment"})]}):e.jsx("div",{className:"transactions-list",children:R.slice(0,5).map((s,D)=>{const u=Z(s),S=u==="sent"?s.receiver:s.sender;return e.jsxs("div",{className:"transaction-item card",style:{animationDelay:`${D*.05}s`},children:[e.jsx("div",{className:`tx-icon ${u}`,children:u==="sent"?"â†—":"â†™"}),e.jsxs("div",{className:"tx-details",children:[e.jsxs("p",{className:"tx-name",children:[u==="sent"?"Sent to ":"From ",e.jsx("strong",{children:S?.full_name||"Unknown"})]}),e.jsxs("p",{className:"tx-meta",children:[e.jsxs("span",{className:"tx-username",children:["@",S?.username]}),e.jsx("span",{className:"tx-date",children:E(s.created_at)})]})]}),e.jsxs("div",{className:`tx-amount ${u}`,children:[u==="sent"?"-":"+",x(s.amount)]})]},s.id)})})]})]}),f==="history"&&e.jsxs("section",{className:"history-section animate-fadeIn",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("button",{className:"back-btn",onClick:()=>v("home"),children:"â† Back"}),e.jsx("h2",{children:"Transaction History"})]}),R.length===0?e.jsxs("div",{className:"empty-state card",children:[e.jsx("span",{className:"empty-icon",children:"ðŸ“­"}),e.jsx("h3",{children:"No transactions yet"}),e.jsx("p",{children:"Your transaction history will appear here"})]}):e.jsx("div",{className:"transactions-list",children:R.map((s,D)=>{const u=Z(s),S=u==="sent"?s.receiver:s.sender;return e.jsxs("div",{className:"transaction-item card",style:{animationDelay:`${D*.03}s`},children:[e.jsx("div",{className:`tx-icon ${u}`,children:u==="sent"?"â†—":"â†™"}),e.jsxs("div",{className:"tx-details",children:[e.jsxs("p",{className:"tx-name",children:[u==="sent"?"Sent to ":"From ",e.jsx("strong",{children:S?.full_name||"Unknown"})]}),e.jsxs("p",{className:"tx-meta",children:[e.jsxs("span",{className:"tx-username",children:["@",S?.username]}),e.jsx("span",{className:"tx-date",children:E(s.created_at)})]}),s.description&&e.jsxs("p",{className:"tx-note",children:['"',s.description,'"']})]}),e.jsxs("div",{className:`tx-amount ${u}`,children:[u==="sent"?"-":"+",x(s.amount)]})]},s.id)})})]}),f==="profile"&&e.jsxs("section",{className:"profile-section animate-fadeIn",children:[e.jsx("button",{className:"back-btn",onClick:()=>v("home"),children:"â† Back to Home"}),e.jsxs("div",{className:"profile-header",children:[e.jsx("div",{className:"profile-avatar",children:r.full_name.charAt(0)}),e.jsx("h2",{children:$?"Edit Profile":r.full_name}),e.jsxs("p",{className:"profile-username",children:["@",r.username]})]}),U.text&&e.jsx("div",{className:`alert alert-${U.type}`,style:{padding:"12px",borderRadius:"12px",marginBottom:"20px",background:U.type==="error"?"var(--danger-bg)":"var(--success-bg)",color:U.type==="error"?"var(--danger)":"var(--success)",textAlign:"center"},children:U.text}),e.jsx("div",{className:"profile-info card",children:$?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"info-row",children:[e.jsx("label",{className:"info-label",htmlFor:"edit-name",children:"Full Name"}),e.jsx("input",{id:"edit-name",type:"text",className:"edit-input",value:z,onChange:s=>O(s.target.value),style:{textAlign:"right",border:"1px solid var(--border-color)",background:"var(--bg-tertiary)",borderRadius:"8px",padding:"8px",color:"var(--text-primary)"}})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("label",{className:"info-label",htmlFor:"edit-phone",children:"Phone"}),e.jsx("input",{id:"edit-phone",type:"tel",className:"edit-input",value:Y,onChange:s=>H(s.target.value),style:{textAlign:"right",border:"1px solid var(--border-color)",background:"var(--bg-tertiary)",borderRadius:"8px",padding:"8px",color:"var(--text-primary)"}})]}),e.jsxs("div",{className:"info-row",style:{display:"flex",gap:"10px",justifyContent:"flex-end",padding:"16px"},children:[e.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>M(!1),children:"Cancel"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:K,children:"Save Changes"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"ðŸ“§ Email"}),e.jsx("span",{className:"info-value",children:r.email})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"ðŸ“± Phone"}),e.jsx("span",{className:"info-value",children:r.phone_number})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"ðŸ‘¤ Username"}),e.jsxs("span",{className:"info-value",children:["@",r.username]})]}),e.jsxs("div",{className:"info-row",children:[e.jsx("span",{className:"info-label",children:"ðŸ’° Balance"}),e.jsx("span",{className:"info-value balance",children:x(r.balance)})]})]})}),!$&&e.jsxs("div",{className:"profile-actions",style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsx("button",{className:"btn btn-secondary btn-block",onClick:G,children:"âœï¸ Edit Profile"}),e.jsx("button",{className:"btn btn-warning btn-block",onClick:ne,disabled:t,children:t?"Sending...":"ðŸ”’ Reset Password"}),e.jsx("button",{className:"btn btn-danger btn-block",onClick:j,children:"ðŸšª Sign Out"}),e.jsx("button",{className:"btn btn-block",onClick:()=>A(!0),style:{background:"transparent",border:"1px solid var(--danger)",color:"var(--danger)",marginTop:"12px"},children:"ðŸ—‘ï¸ Delete Account"})]}),e.jsxs("div",{className:"about-dev card",style:{marginTop:"24px"},children:[e.jsx("h3",{children:"About ZimPay"}),e.jsx("p",{children:"A banking simulation app demonstrating modern web development with React, TypeScript, and Supabase."}),e.jsxs("p",{className:"dev-credit",children:["Designed & Built by ",e.jsx("a",{href:"https://tapiwamakandigona.github.io/portfolio/",target:"_blank",rel:"noopener noreferrer",children:"Tapiwa Makandigona"})]})]})]})]}),g&&e.jsx(oe,{onClose:()=>w(!1),onSuccess:()=>{w(!1),i(),h()}}),o&&e.jsx("div",{className:"modal-overlay",onClick:()=>!k&&A(!1),children:e.jsxs("div",{className:"modal-content glass-card",onClick:s=>s.stopPropagation(),style:{maxWidth:"400px"},children:[e.jsx("h2",{style:{color:"var(--danger)",marginBottom:"16px"},children:"âš ï¸ Delete Account"}),e.jsxs("p",{style:{marginBottom:"16px",color:"var(--text-secondary)"},children:["This action is ",e.jsx("strong",{children:"permanent and cannot be undone"}),". Your profile will be deleted, but your transaction history will be preserved (with your name removed)."]}),e.jsxs("p",{style:{marginBottom:"8px",fontSize:"0.9rem"},children:["Type ",e.jsx("strong",{style:{color:"var(--danger)"},children:"DELETE"})," to confirm:"]}),e.jsx("input",{type:"text",value:I,onChange:s=>W(s.target.value.toUpperCase()),placeholder:"Type DELETE",disabled:k,style:{width:"100%",padding:"12px",borderRadius:"8px",border:I==="DELETE"?"2px solid var(--danger)":"1px solid var(--border-color)",background:"var(--bg-tertiary)",color:"var(--text-primary)",marginBottom:"16px",textAlign:"center",fontWeight:"bold",letterSpacing:"2px"}}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>{A(!1),W(""),m({type:"",text:""})},disabled:k,style:{flex:1},children:"Cancel"}),e.jsx("button",{className:"btn btn-danger",onClick:te,disabled:k||I!=="DELETE",style:{flex:1,opacity:I!=="DELETE"?.5:1},children:k?"Deleting...":"Delete Forever"})]})]})})]}):e.jsx("div",{className:"loading-screen",children:e.jsxs("div",{className:"loading-content",children:[e.jsx("div",{className:"loading-logo",children:"ðŸ’³"}),y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"loading-text",children:"Retrying..."})]}):n?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"loading-text",style:{color:"#fbbf24"},children:"âš ï¸ Taking longer than expected..."}),e.jsx("p",{style:{color:"rgba(255,255,255,0.6)",fontSize:"0.9rem",marginBottom:"1rem"},children:"Your profile may not exist or there's a connection issue."}),e.jsx("button",{onClick:L,className:"btn btn-primary",style:{marginTop:"0.5rem"},children:"ðŸ”„ Retry Loading"}),e.jsx("button",{onClick:()=>{c(),b("/login")},className:"btn btn-outline",style:{marginTop:"0.5rem",color:"white",borderColor:"rgba(255,255,255,0.3)"},children:"Sign Out & Try Again"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{className:"loading-text",children:"Fetching your account..."})]})]})})}export{ue as Dashboard};
